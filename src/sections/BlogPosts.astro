---
import { getCollection } from 'astro:content';
import Post from '@components/Post.astro';
import config from 'project-config.ts';

const blogposts = config.modules.blog.enabled ? await getCollection('blogposts') : null;
if (!blogposts) return;
const latestPosts = blogposts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<section class="last-blog-posts">
  <h2 class="section-heading">
    Latest Posts
    <a href="/blog" class="primary-btn">see all</a>
  </h2>

  <div class="post-container">
    {
      latestPosts.map((post) => (
        <div>
          <Post {post} />
        </div>
      ))
    }
  </div>
</section>

<style lang="scss">
  .last-blog-posts {
    .section-heading {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: space-between;
    }

    .post-container {
      display: flex;
      justify-content: center;
      gap: 28px;
      flex-wrap: wrap;

      div {
        display: flex;
      }
    }
  }
</style>
